# Phase A: 验收 (Acceptance)

> *质检员思维：验证与复盘*

完成实现后，必须进行严格的验收和复盘，形成闭环。这是 GAIA 框架的最后一个阶段，也是持续优化的起点。

---

## 工作流总览

```
        Phase I 产出
           可交付成果
              │
              ▼
    ┌─────────────────────┐
    │ 1. 分数守底线       │
    │    Pass/Fail 检查   │
    └─────────────────────┘
              │
              ▼
    ┌─────────────────────┐
    │ 2. 复盘与归档       │
    │    经验沉淀         │
    └─────────────────────┘
              │
              ▼
    ┌─────────────────────┐
    │ 3. 成果持久化       │
    │    文件即记忆       │
    └─────────────────────┘
              │
              ▼
         任务完成
```

---

## 1. 分数守底线 (Score for Baseline)

### 核心原则

> 对照 Phase A 中定义的核心需求，逐一验证功能是否达到"足够好"的最低标准。这是一个明确的 Pass/Fail 检查。

### 验证流程

#### 步骤一：列出核心需求

从 Phase A 的分析报告中提取 MVP 清单：

```markdown
## 核心需求清单（来自 Phase A）

- [ ] 需求 A
- [ ] 需求 B
- [ ] 需求 C
```

#### 步骤二：逐一验证

| 需求 | 验收标准 | 验证方法 | 结果 |
|------|----------|----------|------|
| 用户认证 | 能正确登录/登出 | 手动测试 3 次 | ✅ Pass |
| 数据存储 | 数据持久化存在 | 重启后验证 | ✅ Pass |
| 基础查询 | 能检索已有数据 | 测试各种查询 | ❌ Fail |

#### 步骤三：处理失败项

对于 Fail 的项目：

| 问题 | 原因 | 修复方案 | 状态 |
|------|------|----------|------|
| 查询失败 | 索引未建立 | 添加索引逻辑 | 待修复 |

### Pass/Fail 标准

| 标准 | 说明 |
|------|------|
| **Pass** | 满足核心需求，达到可用状态 |
| **Fail** | 核心需求未满足，或存在阻塞性问题 |
| **Pass with Notes** | 核心满足，但有已知问题需记录 |

### 实践要点

- 核心需求必须 100% Pass
- 非核心需求可以 Pass with Notes
- 记录所有已知问题，即使不影响 Pass
- 验证证据要保存（截图、日志、测试结果）

### 反模式警示

- ❌ "基本可以了，小问题不管"
- ❌ "功能做了，没测但应该没问题"
- ✅ "逐项验证，全部通过才算完成"
- ✅ "有问题记录在案，后续修复"

---

## 2. 复盘与归档

### 复盘目的

将本次任务的经验转化为未来协作的资产，避免重复踩坑。

### 复盘模板

```markdown
## [项目名称] 复盘报告

### 成功之处
- [做得好的地方 1]
- [做得好的地方 2]

### 待改进点
- [遇到的问题 1]
- [改进建议]

### 核心洞察
- [对未来的启发]

### 更新的 evolution.json
- [Skill 名]: [更新内容摘要]
```

### 归档行动

#### a) 更新 evolution.json

将本次经验写入相关 Skill 的演化记录：

```json
{
  "usage_history": [
    {
      "date": "2025-01-31",
      "context": "[项目名称] 实现",
      "effective_params": {...},
      "lessons_learned": [
        "[本次学到的经验]"
      ]
    }
  ]
}
```

#### b) 清理临时 Skills

使用 `skill-manager` 清理本次任务引入但未来不常用的工具：

```
"清理本次任务引入的临时 Skills，保留 [常用 Skill 名称]。"
```

#### c) 更新最佳实践

如果发现了新的最佳实践，更新到 `best-practices.md`。

### 复盘检查清单

| 项 | 状态 |
|----|------|
| 记录了至少 1 个成功之处 | ⬜ |
| 记录了至少 1 个待改进点 | ⬜ |
| 更新了相关 evolution.json | ⬜ |
| 清理了临时 Skills | ⬜ |
| 提炼了可复用的经验 | ⬜ |

---

## 3. 成果持久化 (Persist Outcomes)

### 核心原则

> 确保最终产出（代码、文档、配置）被妥善保存，并符合"文件是记忆"的原则。

### 持久化清单

| 类别 | 项目 | 存储位置 |
|------|------|----------|
| 代码 | 源代码、脚本 | `src/`, `scripts/` |
| 文档 | README、API 文档 | `docs/`, 根目录 |
| 配置 | 配置文件、环境变量 | `config/`, `.env.example` |
| 演化 | evolution.json | 各 Skill 目录 |
| 验证证据 | 测试截图、日志 | `tests/`, `docs/` |

### 文件组织原则

1. **目录清晰**: 按类型组织，不要堆在根目录
2. **命名规范**: 使用 kebab-case，见名知意
3. **版本控制**: 提交到 Git，写清楚 commit message
4. **备份重要**: 关键配置和文档要有备份

### Commit 规范

```bash
# 格式
git commit -m "[type]: [description]"

# 示例
git commit -m "feat: 添加用户认证功能"
git commit -m "docs: 更新 GAIA 框架文档"
git commit -m "fix: 修复查询索引问题"
```

### 实践要点

- ❌ "代码在本地，没问题"
- ❌ "配置在脑子里，下次再说"
- ✅ "所有产出已提交到 Git"
- ✅ "文档更新，配置已备份"

---

## 验收产出标准

Phase A (验收) 完成后，应产出：

| 项 | 必需性 | 说明 |
|----|--------|------|
| 验收报告 | 必需 | Pass/Fail 检查结果 |
| 复盘报告 | 必需 | 成功与改进点 |
| 更新的演化记录 | 必需 | evolution.json 更新 |
| 持久化的交付物 | 必需 | 代码/文档已保存 |

### 示例产出

```markdown
## [项目名称] 验收完成

### 验收结果
✅ Pass — 所有核心需求已满足

### 复盘
**成功**: 第一次使用该框架，流程顺畅
**改进**: Phase G 的方案搜索可以更系统

### 演化记录
已更新相关 Skills 的 evolution.json

### 交付物
- 代码已提交到 Git
- 文档已更新到 docs/
- 配置已备份
```

---

## GAIA 框架闭环

完成 Phase A 验收后，GAIA 一个完整周期结束：

```
    ┌─────────────────────────────────────────┐
    │                                         │
    ▼                                         │
┌─────────┐   ┌─────────┐   ┌─────────┐   ┌─────────┐
│  G: 生成 │ → │  A: 分析 │ → │  I: 实现 │ → │  A: 验收 │
└─────────┘   └─────────┘   └─────────┘   └─────────┘
    │                                         │
    └─────────────────────────────────────────┘
              演化记录沉淀，优化下一轮
```

每次完成的 GAIA 周期都会：
- 沉淀经验到 evolution.json
- 优化指令映射和最佳实践
- 提升下一轮执行的效率和质量

---

## 文档导航

- 返回 [GAIA 框架总览](../overview.md)
- [Phase G: 生成](./01-generate.md)
- [Phase A: 分析](./02-analyze.md)
- [Phase I: 实现](./03-implement.md)
